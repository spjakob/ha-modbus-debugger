read_register:
  name: Read Register
  description: Reads a register from a Modbus device and displays the value in multiple formats.
  fields:
    hub_id:
      name: Hub ID
      description: The Modbus Hub to use.
      required: true
      selector:
        config_entry:
          integration: ha_modbus_debugger
    unit_id:
      name: Unit ID
      description: The Modbus Slave ID.
      required: true
      default: 1
      selector:
        number:
          min: 1
          max: 247
          mode: box
    register:
      name: Register Address
      description: The address of the register to read.
      required: true
      selector:
        number:
          min: 0
          max: 65535
          mode: box
    count:
      name: Count
      description: Number of registers to read.
      required: false
      default: 1
      selector:
        number:
          min: 1
          max: 125
          mode: box
    register_type:
      name: Register Type
      description: Holding or Input Register.
      required: false
      default: holding
      selector:
        select:
          options:
            - label: Holding Register
              value: holding
            - label: Input Register
              value: input
    scan_profile:
      name: Scan Profile
      description: Choose a scan profile. 'Quick' uses 0.1s timeout. 'Custom' allows manual settings.
      required: true
      default: async_quick
      selector:
        select:
          options:
            - label: Quick Scan (Async)
              value: async_quick
            - label: Quick Scan (Sync)
              value: sync_quick
            - label: Custom
              value: custom
    custom_timeout:
      name: Custom Timeout
      description: Timeout in seconds (Only used if Profile is Custom).
      required: false
      default: 3.0
      selector:
        number:
          min: 0.1
          max: 60.0
          step: 0.1
          mode: box
    custom_retries:
      name: Custom Retries
      description: Number of retries (Only used if Profile is Custom).
      required: false
      default: 3
      selector:
        number:
          min: 0
          max: 10
          mode: box
    custom_concurrency:
      name: Custom Concurrency
      description: Max concurrent requests (Only used if Async).
      required: false
      default: 50
      selector:
        number:
          min: 1
          max: 200
          mode: box
    verbosity:
      name: Verbose Level
      description: Control the level of detail in the output.
      required: true
      default: detailed
      selector:
        select:
          options:
            - label: Basic (Result Only)
              value: basic
            - label: Detailed (Connection Info)
              value: detailed
            - label: Debug (Full Trace)
              value: debug

scan_devices:
  name: Scan for Devices
  description: Scans the bus for Modbus devices by attempting to read a register from each Unit ID.
  fields:
    hub_id:
      name: Hub ID
      description: The Modbus Hub to use.
      required: true
      selector:
        config_entry:
          integration: ha_modbus_debugger
    start_unit:
      name: Start Unit ID
      description: The Unit ID to start scanning from.
      required: true
      default: 1
      selector:
        number:
          min: 1
          max: 247
          mode: box
    end_unit:
      name: End Unit ID
      description: The Unit ID to end scanning at.
      required: true
      default: 247
      selector:
        number:
          min: 1
          max: 247
          mode: box
    register:
      name: Register Address
      description: The register address to read for verification.
      required: false
      default: 0
      selector:
        number:
          min: 0
          max: 65535
          mode: box
    register_type:
      name: Register Type
      description: The type of register to read.
      required: false
      default: holding
      selector:
        select:
          options:
            - label: Holding Register
              value: holding
            - label: Input Register
              value: input
    verbosity:
      name: Verbose Level
      description: Control the level of detail in the output.
      required: true
      default: basic
      selector:
        select:
          options:
            - label: Basic (Summary Only)
              value: basic
            - label: Detailed (Connection Info)
              value: detailed
            - label: Debug (Log Every Device)
              value: debug
