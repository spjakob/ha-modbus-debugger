read_register:
  name: Read Register
  description: Reads a register from a Modbus device and displays the value in multiple formats.
  fields:
    hub_id:
      name: Hub ID
      description: The Modbus Hub to use.
      required: false
      selector:
        config_entry:
          integration: ha_modbus_debugger
    unit_id:
      name: Unit ID
      description: The Modbus Slave ID.
      required: true
      default: 1
      selector:
        number:
          min: 1
          max: 247
          mode: box
    register:
      name: Register Address
      description: The address of the register to read.
      required: true
      selector:
        number:
          min: 0
          max: 65535
          mode: box
    count:
      name: Count
      description: Number of registers to read.
      required: false
      default: 1
      selector:
        number:
          min: 1
          max: 125
          mode: box
    register_type:
      name: Register Type
      description: Holding or Input Register.
      required: false
      default: holding
      selector:
        select:
          options:
            - label: Holding Register
              value: holding
            - label: Input Register
              value: input
    verbosity:
      name: Verbose Level
      description: Control the level of detail in the output.
      required: true
      default: detailed
      selector:
        select:
          options:
            - label: Basic (Result Only)
              value: basic
            - label: Detailed (Connection Info)
              value: detailed
            - label: Debug (Full Trace)
              value: debug

scan_devices:
  name: Scan for Devices
  description: Scans the bus for Modbus devices by attempting to read a register from each Unit ID.
  fields:
    hub_id:
      name: Hub ID
      description: The Modbus Hub to use.
      required: false
      selector:
        config_entry:
          integration: ha_modbus_debugger
    start_unit:
      name: Start Unit ID
      description: The Unit ID to start scanning from.
      required: true
      default: 1
      selector:
        number:
          min: 1
          max: 247
          mode: box
    end_unit:
      name: End Unit ID
      description: The Unit ID to end scanning at.
      required: true
      default: 247
      selector:
        number:
          min: 1
          max: 247
          mode: box
    register:
      name: Register Address
      description: The register address to read for verification.
      required: false
      default: 0
      selector:
        number:
          min: 0
          max: 65535
          mode: box
    register_type:
      name: Register Type
      description: The type of register to read.
      required: false
      default: holding
      selector:
        select:
          options:
            - label: Holding Register
              value: holding
            - label: Input Register
              value: input
    scan_profile:
      name: Scan Profile
      description: "Select a predefined scan profile or Custom. Est. Time â‰ˆ (Count * Timeout * (Retries + 1)) / Concurrency"
      required: true
      default: async_quick
      selector:
        select:
          options:
            - label: Quick Scan (Async) - 0.1s, 0 retries
              value: async_quick
            - label: Quick Scan (Sync) - 0.1s, 0 retries
              value: sync_quick
            - label: Custom Scan (Async)
              value: custom_async
            - label: Custom Scan (Sync)
              value: custom_sync
    custom_timeout:
      name: Custom Timeout (Custom Profile Only)
      description: Timeout in seconds (only for Custom profile).
      required: false
      default: 3.0
      selector:
        number:
          min: 0.1
          max: 60.0
          step: 0.1
          mode: box
    custom_retries:
      name: Custom Retries (Custom Profile Only)
      description: Number of retries (only for Custom profile).
      required: false
      default: 3
      selector:
        number:
          min: 0
          max: 10
          mode: box
    custom_concurrency:
      name: Custom Concurrency (Custom Profile Only)
      description: Max concurrent requests (only for Custom profile).
      required: false
      default: 10
      selector:
        number:
          min: 1
          max: 100
          mode: box
    verbosity:
      name: Verbose Level
      description: Control the level of detail in the output.
      required: true
      default: basic
      selector:
        select:
          options:
            - label: Basic (Summary Only)
              value: basic
            - label: Detailed (Connection Info)
              value: detailed
            - label: Debug (Log Every Device)
              value: debug
    log_to_file:
      name: Log Scan Progress to File
      description: If enabled, logs scan progress and debug info to the Home Assistant log file.
      required: false
      default: false
      selector:
        boolean: {}
    disable_pymodbus_logging:
      name: Suppress Pymodbus Error Logs
      description: If enabled, suppresses detailed Pymodbus error logs (keeping logs clean). Disable to debug connection issues.
      required: false
      default: true
      selector:
        boolean: {}
